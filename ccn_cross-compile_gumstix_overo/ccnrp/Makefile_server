#Macros
CC=g++
FLAGS=-g
ODIR=obj
vpath %.o $(ODIR)

_OBJ=ccnrp.o Daemon.o CCNListener.o CCNRegMsg.o CCNRegEntry.o ccn_global.o\
	CCNPeerMap.o
OBJ=$(patsubst %, $(ODIR)/%, $(_OBJ))

ccnrp:$(OBJ)
	$(CC) $(FLAGS) -o $@ $^

$(ODIR)/ccnrp.o:ccnrp.cpp
	$(CC) $(FLAGS) -c $< -o $@

$(ODIR)/Daemon.o:Daemon.cpp Daemon.cpp
	$(CC) $(FLAGS) -c $< -o $@

$(ODIR)/CCNListener.o:CCNListener.cpp CCNListener.h CCNRegMsg.o CCNPeerMap.o
	$(CC) $(FLAGS) -c $< -o $@

$(ODIR)/CCNRegMsg.o:CCNRegMsg.cpp CCNRegMsg.h CCNRegEntry.o ccn_global.o
	$(CC) $(FLAGS) -c $< -o $@

$(ODIR)/CCNRegEntry.o:CCNRegEntry.cpp CCNRegEntry.h ccn_global.o
	$(CC) $(FLAGS) -c $< -o $@

$(ODIR)/ccn_global.o:ccn_global.cpp ccn_global.h
	$(CC) $(FLAGS) -c $< -o $@

$(ODIR)/CCNPeerMap.o:CCNPeerMap.cpp CCNPeerMap.h
	$(CC) $(FLAGS) -c $< -o $@
	

clean:
	rm obj/*.o
